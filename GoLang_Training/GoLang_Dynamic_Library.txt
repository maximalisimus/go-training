

Динамические библиотеки

Компилятор Go собирает все зависимости программы в один исполняемый файл, 
но начиная с версии Go 1.5 появилась возможность использовать динамические библиотеки.

Для подключения всей стандартной библиотеки языка Go нужно сначала скомпилировать её как динамическую:

# go install -buildmode=shared std

скомпилированная библиотека станет доступна по адресу: $(go env GOROOT)/pkg/$(go env GOOS)_$(go env GOARCH)_dynlink/libstd.so

Примечание: После каждого обновления версии языка Go данную библиотек также следует пересобрать
теперь можно скомпилировать программу test.go с поддержкой динамических библиотек:

$ go build -linkshared -o test

Если необходимо скомпилировать пакет как отдельную библиотеку, выполните:

$ go install -buildmode=shared -linkshared

после чего собранную библиотеку можно найти в папке $GOPATH/pkg/$(go env GOOS)_$(go env GOARCH)_dynlink.


Пользовательскую динамическую библиотеку в системе можно использовать если:

поместить её в каталог который используются системой для стандартного расположения динамических библиотек, 
в Арче это /usr/lib/
прописать путь до библиотеки в файле /etc/ld.so.conf, после чего обновить кеш командой ldconfig
использовать специальную переменную среды $LD_LIBRARY_PATH:

$ export LD_LIBRARY_PATH="/путь/к/каталогу/с/пользовательскими/динамическими/библиотеками"

если такая переменная уже существует, то:

$ export LD_LIBRARY_PATH="/путь/к/каталогу/с/пользовательскими/динамическими/библиотеками:${LD_LIBRARY_PATH}"





